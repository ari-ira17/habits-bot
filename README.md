# HabitsBot: Бот Для Формирования Привычек

## О Проекте

**HabitsBot** — это Telegram-бот библиотеке **Aiogram**, разработанный для формирования и отслеживания полезных привычек. Бот помогает пользователям развивать дисциплину и достигать целей через **регулярное выполнение привычек** с **персонализированными напоминаниями** и **анализом прогресса**.

Для создания напоминаний используется планировщик задач `AsyncIOScheduler` на **Python**, а также библиотека `asyncio`. В базе данных **PostgreSQL** хранится информация о пользователях, привычках, времени их выполнения, а также часовые пояса каждого юзера, определенные по его геолокации при помощи **API TimeZoneDB**.

---

## Функциональность

- **Добавление привычек** с настройкой времени и частоты напоминаний
- **Напоминания** о выполнении привычек в заданное время
- **Отслеживание прогресса** по каждой привычке
- **Ежедневная статистика** с мотивационными сообщениями
- **Еженедельная статистика** с анализом прогресса за неделю
- **Автоматическая деактивация** привычки после 10 успешных выполнений
- **Поддерживающие советы** из книги "Атомные привычки" и других источников

---

## Команды

- `/start` - начать работу с ботом
- `/help` - получить список всех команд
- `/add_habit` - добавить новую привычку с повтором по дням или по неделям
- `/show_my_habits` - посмотреть все созданные привычки
- `/send_statistic` - получить статистику по всем привычкам
- `/delete_habit` - удалить привычку

--- 

## Структура Репозитория

Проект имеет следующую структуру директорий:
```
├── bot/
│   ├── habit/                         
│   │   ├── __init__.py                # Инициализация пакета habit
│   │   ├── calculate_percentage.py    # Вычисление процента выполнения привычки в общем, за последнюю неделю
│   │   ├── completion.py              # Обработка выполнения, невыполнения привычки
│   │   ├── data.py                    # Сохранение привычки по дням, по неделям в БД
│   │   ├── habit_by_day.py            # Создание привычки с повтором по дням
│   │   ├── habit_by_week.py           # Создание привычки с повтором по неделям
│   │   ├── scheduler.py               # Планировщик отправки напоминаний о привычках
│   │   ├── states.py                  # Состояния для Finite State Machine
│   │   └── timezone.py                # Вычисление часового пояса пользователя
│   ├── handlers/                      
│   │   ├── __init__.py                # Инициализация пакета handlers
│   │   ├── add_habit_handler.py       # Обработка команды /add_habit
│   │   ├── delete_habit_handler.py    # Обработка команды /delete_habit
│   │   ├── format_habit.py            # Вывод информации о привычке
│   │   ├── help_handler.py            # Обработка команды /help
│   │   ├── send_statistic_handler.py  # Обработка команды /send_statistic
│   │   ├── show_habits_handler.py     # Обработка команды /show_my_habits
│   │   ├── start_handler.py           # Обработка команды /start
│   │   └── unknow_message_handler.py  # Ответ на сообщение пользователя
│   ├── keyboards/                     
│   │   ├── __init__.py                # Инициализация пакета keyboards
│   │   ├── inline_keyboards/
│   │   │   ├── __init__.py            # Инициализация пакета inline_keyboards
│   │   │   ├── choose_habit_kb.py     # Клавиатура с выбором повтора привычки
│   │   │   ├── confirm_delete_habit_kb.py  # Клавиатура с отменой удаления привычки
│   │   │   └── done_habit_kb.py       # Клавиатура с выполнением, невыполнением привычки при напоминании
│   │   └── reply_keyboards/
│   │       ├── __init__.py            # Инициализация пакета reply_keyboards
│   │       └── get_on_start_kb.py     # Клавиатура с подтверждением, отменой взаимодействия с ботом
│   ├── statistic/                     
│   │   ├── __init__.py                # Инициализация пакета statistic
│   │   ├── generate_statistic.py      # Графики ежедневной, еженедельной статистики
│   │   └── send_statistic.py          # Планировщик отправки ежедневной, еженедельной статистики
│   ├── advices.py                     # Мотивация, советы по формированию привычек
│   ├── config.py                      # Конфигурационные параметры
│   ├── create_bot.py                  # Создание экземпляра бота и диспетчера
│   ├── crud.py                        # Операции с базой данных
│   ├── db.py                          # Настройка подключения к БД
│   ├── main.py                        # Основной файл запуска
│   └── models.py                      # Модели SQLAlchemy
├── .dockerignore                      
├── .gitignore                        
├── Dockerfile                         # Docker-инструкции для контейнера
├── README.md                          # Документация проекта
├── deploy.sh                          # Скрипт для деплоя
├── docker-compose.dev.yml             # Docker Compose для разработки
└── docker-compose.prod.yml            # Docker Compose для продакшена
```
---

## Технические детали

- **Язык программирования**: Python 3.9+
- **Фреймворк**: aiogram 3.x
- **База данных**: SQLAlchemy с поддержкой PostgreSQL
- **Планировщик задач**: AsyncIOScheduler
- **Графики**: matplotlib
- **API**: TimeZoneDB
